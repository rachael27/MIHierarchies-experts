<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport">
    <title>MIHierarchies</title>


    <link rel="icon" href="Images/logo-hcircle-dark.png">


    <link rel="stylesheet" type="text/css"
        href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />

    <link rel="stylesheet" type="text/css" href="./assets/styles.css" />

    <script src="https://kit.fontawesome.com/ae1e2e7d99.js" crossorigin="anonymous"></script>

</head>


<body>





    <div class="container" style="width:100%;">
        <div class="outer row" style="color:black;">
            <div style="width:100%;  margin-bottom:3%; float:left; background-color:#155446;; color:white;">
                <h1>Tree Visualization</h1>
                <br>
            </div>
            <br />




            <div class="inner row" id="consent-form" style="width:100%;">
                <h1
                    style="margin-bottom:50px; color:black; font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">
                    Consent Form</h1>


                <div class="consent-radio"
                    style="font-size:25px; margin-left:120px; font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">

                    <span style="margin-left:20px; width:90%; ">
                        <label class="form-check-label" for="consent1" style="font-weight: normal;">
                            <input class=" form-check-input consent-checkbox" type="checkbox" id="consent1" value=""
                                aria-label="" style="float:left;">
                            <p class="text-justify" style="margin-left:50px;">
                                I understand that my participation is entirely voluntary, that I can choose not to
                                participate in part or all of the study, and that I can withdraw at any stage of the
                                user
                                study
                                without
                                having to give a reason and without being penalised in any way (e.g., if I am a student,
                                my
                                decision whether or not to take part will not affect my grades).
                            </p>
                        </label>

                    </span>
                    <br>


                    <span style="margin-left:20px; width:90%; margin-top:20px;">
                        <label class="form-check-label" for="consent2" style="font-weight: normal;">
                            <input class="form-check-input consent-checkbox" type="checkbox" id="consent2" value=""
                                aria-label="" style="float:left;">
                            <p class="text-justify" style="margin-left:50px;">
                                I understand I can request that my data be withdrawn and deleted even after the user
                                study is complete, any time up until the analysis of my databegins, specificallytwo
                                weeks
                                after
                                my participation.
                            </p>
                        </label>
                    </span>
                    <br>



                    <span style="margin-left:20px; width:90%; margin-top:20px;">
                        <label class="form-check-label" for="consent3" style="font-weight: normal;">
                            <input class="form-check-input consent-checkbox" type="checkbox" id="consent3" value=""
                                aria-label="..." style="float:left;">
                            <p class="text-justify" style="margin-left:50px;">
                                I understand that any information I provide is confidential, and that no information
                                that I disclose will lead to the identification of any individual in the reports on the
                                project, either by the researcher or by any other party.
                            </p>
                        </label>
                    </span>
                    <br>



                    <span style="margin-left:20px; width:90%; margin-top:20px;">
                        <label class="form-check-label" for="consent4" style="font-weight: normal;">
                            <input class="form-check-input consent-checkbox" type="checkbox" id="consent4" value=""
                                aria-label="..." style="float:left;">
                            <p class="text-justify" style="margin-left:50px;">
                                I have read the information sheet, had the opportunity to ask questions and I understand
                                the principles, procedures and possible risks involved.
                            </p>
                        </label>
                    </span>
                    <br>




                    <span style="margin-left:20px; width:90%; margin-top:20px;">
                        <label class="form-check-label" for="consent5" style="font-weight: normal;">
                            <input class="form-check-input consent-checkbox" type="checkbox" id="consent5" value=""
                                aria-label="..." style="float:left;">
                            <p class="text-justify" style="margin-left:50px;">
                                I understand that de-identified data may be made publicly available, for example through
                                Open Science Framework online data repositories,
                                journal publication or at the request of other researchers.
                            </p>
                        </label>
                    </span>
                    <br>




                    <span style="margin-left:20px; width:90%; margin-top:20px;">
                        <label class="form-check-label" for="consent6" style="font-weight: normal;">
                            <input class="form-check-input consent-checkbox" type="checkbox" id="consent6" value=""
                                aria-label="..." style="float:left;">
                            <p class="text-justify" style="margin-left:50px;">
                                I have read and understood the information above and
                                confirm that I consent to take part in the University of Sussex research project.
                            </p>
                        </label>
                    </span>
                    <br />
                    <br />
                    <div id="warning-message" class="alert-light"
                        style="opacity:1;  width:100% ; margin-left:20px; color:red;">
                        <span>
                            <p><i class="fa-solid fa-circle-exclamation"></i> Please tick all checkboxes</p>
                        </span>
                    </div>


                    <div class="btn-group btn-group-sm col text-center" role="group" aria-label="Second group"
                        style="margin-top: 30px; width:100%;">
                        <button type="button" class="btn-lg text-center" id="btn-treeswlinking">Linked
                            Tree</button>

                        <button type="button" class="btn-lg text-center" id="btn-mtree"
                            style="margin-left: 20px;">Merged Tree</button>

                    </div>

                    <br />



                </div>

            </div>
        </div>


        <script src="https://d3js.org/d3.v4.js"></script>
        <script type="text/javascript">


            var logObject = [];

            var uniq = (new Date()).getTime();




            var date = new Date();

            update_log("", "Landed on consent form.", "", "");

            /* logObject.push({

                "userID": userID,
                "vizID": "",
                "screenSize": window.innerWidth + ";" + window.innerHeight,
                "pageID": pageID,
                "elementID": "",
                "elementType": "",
                "description": "New user. Landed on consent form.",
                "date": date.getDate() + "-" + date.getMonth() + "-" + date.getFullYear(),
                "overall_timestamp": Math.round(+new Date()/1000),
                "phase_timestamp": new Date().getMilliseconds(),
                "questionID": "",
                "question": "",
                "useranswer": "",
                "correctanswer": ""

            }); */



            //window.localStorage.setItem("logObject", JSON.stringify(logObject));
            //window.localStorage.setItem("userID", userID);



            d3.selectAll(".consent-checkbox")
                .on("change", function (d) {
                    checkconsent();
                });




            d3.select("#btn-mtree")
                .on("click", function (d) {
                    var consent_counter = 0;
                    for (var i = 0; i < d3.selectAll(".consent-checkbox")._groups[0].length; i++) {
                        if (d3.selectAll(".consent-checkbox")._groups[0][i].checked)
                            consent_counter++;
                    }

                    if (consent_counter == d3.selectAll(".consent-checkbox")._groups[0].length) {
                        update_log("btn-mtree", "button", "Consent recorded. Redirected to MergedTree", "click");
                        /* logObject.push({

                            "userID": userID,
                            "vizID": "",
                            "screenSize": window.innerWidth + ";" + window.innerHeight,
                            "pageID": pageID,
                            "elementID": "btn-mtree",
                            "elementType": "button",
                            "description": "Redirecting to mtree landing page",
                            "date": date.getDate() + "-" + date.getMonth() + "-" + date.getFullYear(),
                            "overall_timestamp": Math.round(+new Date()/1000),
                            "phase_timestamp": new Date().getMilliseconds(),
                            "questionID": "",
                            "question": "",
                            "useranswer": "",
                            "correctanswer": ""

                        }); */
                        window.location.href = 'landingpage.html?page=landingpage';
                    }
                });

            d3.select("#btn-treeswlinking")
                .on("click", function (d) {
                    var consent_counter = 0;
                    for (var i = 0; i < d3.selectAll(".consent-checkbox")._groups[0].length; i++) {
                        if (d3.selectAll(".consent-checkbox")._groups[0][i].checked)
                            consent_counter++;
                    }

                    if (consent_counter == d3.selectAll(".consent-checkbox")._groups[0].length) {
                        update_log("btn-treeswlinking", "button", "Consent recorded. Redirected to LinkedTree", "click");
                        /*  logObject.push({
 
                             "userID": userID,
                             "vizID": "",
                             "screenSize": window.innerWidth + ";" + window.innerHeight,
                             "pageID": pageID,
                             "elementID": "btn-treewlinking",
                             "elementType": "button",
                             "description": "Redirecting to trees w linking landing page",
                             "date": date.getDate() + "-" + date.getMonth() + "-" + date.getFullYear(),
                             "overall_timestamp": Math.round(+new Date()/1000),
                             "phase_timestamp": new Date().getMilliseconds(),
                             "questionID": "",
                             "question": "",
                             "useranswer": "",
                             "correctanswer": ""
 
                         }); */
                        window.location.href = 'twl-landingpage.html?page=landingpage';
                    }
                });


            function checkconsent() {
                var consent_counter = 0;
                for (var i = 0; i < d3.selectAll(".consent-checkbox")._groups[0].length; i++) {
                    if (d3.selectAll(".consent-checkbox")._groups[0][i].checked)
                        consent_counter++;
                }

                if (consent_counter == d3.selectAll(".consent-checkbox")._groups[0].length)
                    d3.select("#warning-message").style("opacity", 0);
                else
                    d3.select("#warning-message").style("opacity", 1);
            }

            function update_log(elementID, elementType, elementDescription, eventDescription) {


                logObject = JSON.parse(localStorage.getItem("logObject"));
                logObject.push({
                    "date": date.getDate() + "-" + date.getMonth() + "-" + date.getFullYear(),
                    "userID": localStorage.getItem("userID"),
                    "vizID": "",
                    "screenWidth": window.innerWidth,
                    "screenHeight": window.innerHeight,
                    "pageID": "consent",
                    "elementID": elementID,
                    "elementType": elementType,
                    "elementDescription": elementDescription,
                    "eventDescription": eventDescription,
                    "overall_timestamp": Math.round(+new Date() / 1000),
                    //"phase_timestamp": new Date().getMilliseconds(),
                    "questionID": "",
                    "question": "",
                    "useranswer": "",
                    "correctanswer": "",
                    "score": ""
                });
                localStorage.removeItem("logObject");
                localStorage.setItem("logObject", JSON.stringify(logObject));

            }


        </script>

</body>

</html>